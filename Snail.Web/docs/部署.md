# 部署
## 生成发布的文件
* 有如下两种方法
### 依赖发布，发布成exe和dll，exe可点击执行，dll要用命令执行，文件较小
dotnet publish -c release

### 独立必布，发布成exe和dll，exe可点击执行，dll要用命令执行，文件较大
* 下面的rid改成win7-x86,win7-x64,win-x86,win-x64等
* 完整的rid列表参考https://github.com/dotnet/runtime/blob/master/src/libraries/pkg/Microsoft.NETCore.Platforms/runtime.json
dotnet publish -c release -r rid

## 部署在windows service上，适用于asp.net core 3.0及以上
* 安装Microsoft.Extensions.Hosting.WindowsServices
* 在program.cs里，加上UserWindowsService，如Host.CreateDefaultBuilder(args).UseWindowsService()
* 创建windows 服务，如下
sc create installweb  binpath="G:\work\OrPMS\InstallWeb\bin\release\netcoreapp3.1\installWeb.exe"
* 启动服务即可，用sc start installweb或是在界面上启动

## 定义服务的端口和ip
有如下几种方法
* 用命令行设置urls参数：dotnet run xxx --urls http://*:5000
* 在配置文件json里配置key为urls的值：{"urls":"http://*:5000;http://*:5001}